<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI & POST-PRODUCTION Feed Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 20px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .status {
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
    }
    .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    .item {
      background: white;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1 { color: #333; }
    h2 { color: #666; margin-top: 30px; }
    .count { font-size: 24px; font-weight: bold; color: #007bff; }
  </style>
</head>
<body>
  <h1>AI & POST-PRODUCTION Category Feed Test</h1>
  
  <div id="status"></div>
  <div id="results"></div>

  <script>
    const statusDiv = document.getElementById('status');
    const resultsDiv = document.getElementById('results');

    // Test loading news.json
    fetch('data/news.json?v=' + Date.now())
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        return response.json();
      })
      .then(data => {
        statusDiv.innerHTML = '<div class="status success">✅ Successfully loaded news.json</div>';
        
        // Filter for ai-post-production category
        const aiItems = data.filter(item => 
          (item.category || '').toLowerCase() === 'ai-post-production'
        );

        // Show results
        let html = `
          <div class="status info">
            <h2>Total Articles in news.json: ${data.length}</h2>
            <h2>AI & POST-PRODUCTION Articles: <span class="count">${aiItems.length}</span></h2>
          </div>
        `;

        // Show category breakdown
        const categories = {};
        data.forEach(item => {
          const cat = item.category || 'unknown';
          categories[cat] = (categories[cat] || 0) + 1;
        });

        html += '<div class="status info"><h3>Category Breakdown:</h3><ul>';
        Object.keys(categories).sort().forEach(cat => {
          html += `<li><strong>${cat}</strong>: ${categories[cat]} articles</li>`;
        });
        html += '</ul></div>';

        // Show first 5 AI & POST-PRODUCTION articles
        if (aiItems.length > 0) {
          html += '<h2>Sample AI & POST-PRODUCTION Articles:</h2>';
          aiItems.slice(0, 5).forEach((item, idx) => {
            html += `
              <div class="item">
                <h3>${idx + 1}. ${item.title}</h3>
                <p><strong>Source:</strong> ${item.source}</p>
                <p><strong>Category:</strong> ${item.category}</p>
                <p><strong>Link:</strong> <a href="${item.link}" target="_blank">${item.link}</a></p>
              </div>
            `;
          });

          html += '<div class="status success">✅ AI & POST-PRODUCTION feeds are working correctly!</div>';
        } else {
          html += '<div class="status error">❌ No articles found with ai-post-production category</div>';
        }

        resultsDiv.innerHTML = html;
      })
      .catch(error => {
        statusDiv.innerHTML = `<div class="status error">❌ Error loading news.json: ${error.message}</div>`;
        console.error('Error:', error);
      });
  </script>
</body>
</html>
